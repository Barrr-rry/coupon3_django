{% load staticfiles %}
<!DOCTYPE html>
<!--[if IE 8 ]><html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US"><!--<![endif]-->
<head>
  {% include 'includes/meta.html' %}

  {% include 'includes/css.html' %}

  <link rel="stylesheet" type="text/css" href="{% static 'stylesheets/main.css' %}?token={{ token }}">

  <!-- Google font -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap" rel="stylesheet">

</head>
<body class="header_sticky">

{% include 'includes/preloader.html' %}

{% include 'includes/header.html' %}<!-- /.header -->

<section class="tp-banner">
  <div class="slider">
    <div class="slide_viewer slide_viewer_store">
      <div class="slide_group">
        <div class="slide slide_shop">
        </div>
        <div class="slide slide_shop">
        </div>
        <div class="slide slide_shop">
        </div>
        <div class="slide slide_shop">
        </div>
      </div>
    </div>
  </div><!-- End // .slider -->

  <div class="slide_buttons">
  </div>

  <div class="directional_nav directional_nav_store">
    <div class="previous_btn" title="Previous">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="-11 -11.5 65 66">
        <g>
          <path fill="#ffffff" d="M25.43,33.243L14.628,22.429c-0.433-0.432-0.433-1.132,0-1.564L25.43,10.051c0.432-0.432,1.132-0.432,1.563,0	c0.431,0.431,0.431,1.132,0,1.564L16.972,21.647l10.021,10.035c0.432,0.433,0.432,1.134,0,1.564	c-0.215,0.218-0.498,0.323-0.78,0.323C25.929,33.569,25.646,33.464,25.43,33.243z"/>
        </g>
      </svg>
    </div>
    <div class="next_btn" title="Next">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="-11 -11.5 65 66">
        <g>
          <path fill="#ffffff" d="M18.022,33.569c 0.282,0-0.566-0.105-0.781-0.323c-0.432-0.431-0.432-1.132,0-1.564l10.022-10.035 			L17.241,11.615c 0.431-0.432-0.431-1.133,0-1.564c0.432-0.432,1.132-0.432,1.564,0l10.803,10.814c0.433,0.432,0.433,1.132,0,1.564 L18.805,33.243C18.59,33.464,18.306,33.569,18.022,33.569z"/>
        </g>
      </svg>
    </div>
  </div><!-- End // .directional_nav -->

<!--  <div id="rev_slider_1078_1_wrapper" class="rev_slider_wrapper fullwidthbanner-container" data-alias="classic4export"-->
<!--       data-source="gallery"-->
<!--       style="margin:0px auto;background-color:transparent;padding:0px;margin-top:0px;margin-bottom:0px;">-->
<!--    &lt;!&ndash; START REVOLUTION SLIDER 5.3.0.2 auto mode &ndash;&gt;-->
<!--    <div id="rev_slider_1078_1" class="rev_slider fullwidthabanner" style="display:none;" data-version="5.3.0.2">-->
<!--      <div class="slotholder"></div>-->
<!--      <ul>&lt;!&ndash; SLIDE  &ndash;&gt;-->
<!--        {% for el in instance.images %}-->
<!--          <li data-index="rs-3049" data-transition="slideremovedown" data-slotamount="7" data-hideafterloop="0"-->
<!--              data-hideslideonmobile="off" data-easein="Power4.easeInOut" data-easeout="Power4.easeInOut"-->
<!--              data-masterspeed="2000" data-rotate="0" data-saveperformance="off" data-title="Ken Burns" data-param1=""-->
<!--              data-param2="" data-param3="" data-param4="" data-param5="" data-param6="" data-param7="" data-param8=""-->
<!--              data-param9="" data-param10="" data-description="">-->

<!--            &lt;!&ndash; MAIN IMAGE &ndash;&gt;-->
<!--            <img src="/media/{{ el }}" alt="" data-bgposition="center center" data-kenburns="off"-->
<!--                 data-duration="3000" data-ease="Linear.easeNone" data-scalestart="100" data-scaleend="120"-->
<!--                 data-rotatestart="0" data-rotateend="0" data-offsetstart="0 0" data-offsetend="0 0"-->
<!--                 data-bgparallax="10"-->
<!--                 class="rev-slidebg" data-no-retina>-->
<!--          </li>-->
<!--        {% endfor %}-->

<!--      </ul>-->
<!--    </div>-->
<!--  </div>&lt;!&ndash; END REVOLUTION SLIDER &ndash;&gt;-->
</section><!-- /.tp-banner -->

<section class="flat-title">
  <div class="container">
    <div class="row">
      <div class="col-md-8">
        <div class="title-left">
          <div class="box-title">
            <a href="#" title="">{{ instance.name }}</a>
          </div><!-- /.box-title -->
          <ul class="box-address">
            <li class="phone">
              <a href="tel:{{ instance.phone }}"><i class="fa fa-phone" aria-hidden="true"></i>{{ instance.phone }}</a>
            </li>
            <li class="address">
              <a href="{{ google }}" target="_blank"><i class="fa fa-map-marker" aria-hidden="true"></i>{{ instance.address }}</a>
            </li>
          </ul><!-- /.box-address -->
        </div><!-- /.title-left -->
      </div><!-- /.col-md-8 -->
      <div class="col-md-4">
        <ul class="social-ft">
          <li>
            <a class="share-fb share-to" data-sns="facebook" href="#" title="">
              <img src="/media/share_fb.svg" alt="">
            </a>
          </li>
          <li>
            <a class="share-line share-to" href="#" title="" data-sns="line">
              <img src="/media/share_line.svg" alt="">
            </a>
          </li>
          <li>
            <a class="share-url" href="#" title=""
               data-url="/store/{{ instance.id }}/"
               data-name="{{ instance.name }}"
            >
              <img src="/media/share_url.svg" alt="">
            </a>
          </li>
          <a href="/store/{{ instance.id }}/update/" title="">
              <button style="color: white; width:100px; height:40px; background-color: white"></button>
          </a>
        </ul>
      </div><!-- /.col-md-4 -->
    </div><!-- /.row -->
  </div><!-- /.container -->
</section><!-- /.flat-title -->

<section class="flat-row flat-explore-detail">
  <div class="container">
    <div class="row display-initial">
      <div class="col-md-8">
        {% for el in instance.storediscount %}
          <div class="text-box">
            <h3><span class="discount-type-border">{{ el.discount_type.name }}</span><span>{{ el.name }}</span></h3>
            <div class="text-desc">
              <p>
                {{ el.description|safe }}</p>
            </div>
          </div>
        {% endfor %}
      </div><!-- /.col-md-8 -->
      <div class="col-md-4">
        <div class="sidebar">
          <div class="pdmap style1" id="flat-map-4">
            <div class="flat-maps" data-address="Ngõ 178 Nguyễn Lương Bằng, Chợ Dừa, Đống Đa, Hà Nội, Việt Nam"
                 data-image="images/icon/map.png" data-name="Themesflat Map"></div>
            <div id="map" class="map_store_id" style="width: 100%;height: 220px">
              <a class="map_btn" target="_blank" href="{{ google }}">導航到商家</a>
            </div>
          </div><!-- /#flat-map -->
          <div class="box contact-box">
            <ul class="contact-list">
              <li class="address">
                <a href="{{ google }}" target="_blank">
                  <i class="fa fa-map-marker" aria-hidden="true"></i>
                  {{ instance.address }}
                </a>
              </li>
              <li>
                <a href="tel:{{ instance.phone }}" target="_blank"><i class="fa fa-phone" aria-hidden="true"></i>{{ instance.phone }}
                </a>
              </li>
              {% if instance.website %}
                <li><i class="fa fa-globe" aria-hidden="true"></i><a href="{{ instance.website }}"
                                                                     title="" target="_blank">{{ instance.website }}</a>
                </li>
              {% endif %}
            </ul>
          </div>
        </div>
      </div><!-- /.col-md-4 -->
    </div><!-- /.row -->
  </div><!-- /.container -->
</section><!-- /.flat-explore-detail <-->


{% include 'includes/footer.html' %}

<!-- Javascript -->
{% include 'includes/js.html' %}
<script>
  $(document).ready(() => {
    const position = {
      coords: {
        latitude: {{instance.latitude}},
        longitude: {{instance.longitude}}
      },
      zoom: 12
    }
    showSelfPosition(position)
    $('.share-to').snsShare('快來看看{{instance.name}}用三倍券的超棒優惠！', window.location.href)
    $('.share-url').on('click', function () {
      let $el = $(this)
      let msg = `快來看看${$el.attr('data-name')}用三倍券的超棒優惠！${window.location.origin}/${$el.attr('data-url')}`
      copy(msg)
      Swal.fire({
        text: '網址已複製',
        confirmButtonText: '確定'
      })
    })

  })
</script>

<script>
  $('.slider').each(function() {
    var $this = $(this);
    var $group = $this.find('.slide_group');
    var $slides = $this.find('.slide');
    var bulletArray = [];
    var currentIndex = 0;
    var timeout;

    function move(newIndex) {
      var animateLeft, slideLeft;

      advance();

      if ($group.is(':animated') || currentIndex === newIndex) {
        return;
      }

      bulletArray[currentIndex].removeClass('active');
      bulletArray[newIndex].addClass('active');

      if (newIndex > currentIndex) {
        slideLeft = '100%';
        animateLeft = '-100%';
      } else {
        slideLeft = '-100%';
        animateLeft = '100%';
      }

      $slides.eq(newIndex).css({
        display: 'block',
        left: slideLeft
      });
      $group.animate({
        left: animateLeft
      }, function() {
        $slides.eq(currentIndex).css({
          display: 'none'
        });
        $slides.eq(newIndex).css({
          left: 0
        });
        $group.css({
          left: 0
        });
        currentIndex = newIndex;
      });
    }

    function advance() {
      clearTimeout(timeout);
      timeout = setTimeout(function() {
        if (currentIndex < ($slides.length - 1)) {
          move(currentIndex + 1);
        } else {
          move(0);
        }
      }, 4000);
    }

    $('.next_btn').on('click', function() {
      if (currentIndex < ($slides.length - 1)) {
        move(currentIndex + 1);
      } else {
        move(0);
      }
    });

    $('.previous_btn').on('click', function() {
      if (currentIndex !== 0) {
        move(currentIndex - 1);
      } else {
        move(3);
      }
    });

    $.each($slides, function(index) {
      var $button = $('<a class="slide_btn">&bull;</a>');

      if (index === currentIndex) {
        $button.addClass('active');
      }
      $button.on('click', function() {
        move(index);
      }).appendTo('.slide_buttons');
      bulletArray.push($button);
    });

    advance();
  });
</script>

</body>
</html>